<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
            integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer">
    </script>
</head>
<body>
<div>

    <!--로그인 페이지 -->
    <div id="form_save">

        <form>

            <label for="form_email">ID</label>
            <input type="text" name="email" id="form_email">

            <label for="form_password">Password</label>
            <input type="text" name="password" id="form_password">


            <button type="submit"> 로그인 </button>
        </form>
    </div>


    <form id="signUpForm" method="get" action="/sign-up">
        <button type="submit">회원가입</button>
    </form>

</div>
<script th:inline="javascript" type="text/javascript">
    //const csrfToken = document.querySelector("meta[name='_csrf']").content;

    const postApi = document.getElementById("form_save"); // DOM

    let user_email;

    let user_password;

    postApi.addEventListener('submit' , (e) =>{

        e.preventDefault();

        user_email  = document.getElementById("form_email").value; // user1

        user_password = document.getElementById("form_password").value; // user1


        try {
            axios.post("/login", {
                email: user_email,
                password: user_password
            // },{
            //     headers:{
            //         'X-CSRF-TOKEN': csrfToken
            //     }
            }).then(function (response) {
                const data = response.data
                console.log(data.id)
                console.log(response)
                location.href = "/api/user/list"
            })
        }catch(err) {
            console.log(e)
        }

    });
</script>

</body>
</html>